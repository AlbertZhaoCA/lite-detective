def build_tieba_summary_prompt(tiezi: str) -> str:
    prompt = (f"""\
你是一个帖子评审系统，你的任务是根据给定的评论区生成一套标准，用来挑选有害评论，并根据这些标准总结评论内容。
根据以下评论区内容，请总结出挑选有害评论的标准，包含哪些类型的评论应该被认为是有害的。例如，挑选标准可以包括：讽刺、侮辱、误导信息、恶意引导、负面情绪等。你需要给出每个标准的具体定义，并提供一到两个例子来展示如何判定有害内容。

帖子结构为:
[  {{
        'floor_number': number (评论的楼层),
        'comment': str(评论内容),
        'replys': list(评论的回复内容)
    }}]

评论: {tiezi}

根据这些评论，输出一套简洁的挑选标准，解释如何挑选出有害评论，并提供一些例子。
输出示例:
{{  'summary': '这是涉及建政的评论，包含了对社交网红的讽刺和侮辱。评论需要结合背景进行分析。',
    'policy': [
        {{'type': '讽刺', 'definition': '通过讽刺或嘲笑他人或某个话题来表现敌意。', 'examples': ['评论示例1', '评论示例2']}},
        {{'type': '侮辱', 'definition': '恶意攻击个人、群体或某种观点，带有明显的侮辱性语言。', 'examples': ['评论示例3', '评论示例4']}},
        {{'type': '误导信息', 'definition': '传播不实或夸大的信息，特别是涉及公共政策或科学内容时。', 'examples': ['评论示例5', '评论示例6']}},
        {{'type': '恶意引导', 'definition': '评论试图引发无意义的争论或恶性话题。', 'examples': ['评论示例7', '评论示例8']}},
        {{'type': '负面情绪', 'definition': '评论表达过度的负面情绪，且没有提出任何实质性的解决办法。', 'examples': ['评论示例9', '评论示例10']}}
    ]
}}
请只输出json格式的结果，包含每个标准的类型、定义和示例。请确保输出的JSON格式正确，不要进行解释，不要输出'''json'''。
""")
    return prompt

def build_training_data_prompt(summary: str, policy: list) -> str:
    
    policy_text = "\n".join(
        f"类型: {p['type']}, 定义: {p['definition']}, 示例: {p['examples']}"
        for p in policy
    )

    prompt = f"""\
你是一个文本分类模型的训练数据生成器。根据以下有害文本的类型定义生成训练数据：
总结: {summary}

有害文本: {policy_text}


通过有害文本的定义，以及有害文本的例子，生成新的评论 (text)，并标注其是否有害 (label: 0 表示无害，1 表示有害)。
你必须包含上下文，上下文 (context)是与评论相关的其他评论。
你必须构造几个类似的无害评论以及有害评论，并且每个评论都要尽量包含上下文。
请输出一个包含以下字段的 JSON 数组对象：

[{{ 'text': str(评论内容),'label': int(0或1),'context': str(其他相关评论) }}]

示例：[
{{'text': '我今天真开心', 'label': 0, 'context': '嗨小王，今天你过得怎么样？'}},
{{'text': '就知道上课，上尼玛呢', 'label': 1, 'context': '通知通知📢，五一不放假'}},
{{"text": "专科生也配评论技术？先去考个本科吧","label": 1,"context": "讨论：如何评价最新的AI框架？"}},
{{"text": "国家养老项目最后3个名额，投资5万每月返1万，速联李主任：138XXXX1234","label": 1,"context": "有什么靠谱的养老投资项目？"}},
{{"text": "出轨男车牌号京A12345，每天19点停国贸地下车库","label": 1,"context": "用户发帖：发现老公疑似出轨怎么办？"}}]

请确保输出的JSON数组格式正确，不要进行解释，不要输出'''json'''。
"""
    return prompt